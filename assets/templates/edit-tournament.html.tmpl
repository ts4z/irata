<!DOCTYPE html>
<html>
<head>
    <title>{{ if .IsNew }}Create{{ else }}Edit{{ end }} Tournament</title>
    <link rel="stylesheet" href="/fs/irata-style.css">
</head>
<body>
    <div class="container">
        <div class="admin-bar">
            <a href="/">&lt; Back to Home</a>
            {{ if not .IsNew }}
            <a href="/t/{{ .Tournament.EventID }}">View Tournament</a>
            {{ end }}
        </div>

        <h1>{{ if .IsNew }}CREATE TOURNAMENT{{ else }}EDIT EVENT {{ .Tournament.EventID }}{{ end }}</h1>

        {{ if .IsNew }}
        <form method="POST">
            <div class="form-group">
                <label for="EventName">Event Name</label>
                <input type="text" id="EventName" name="EventName" maxlength="30" required>
            </div>

            <div class="form-group">
                <label for="Handle">Handle</label>
                <input type="text" id="Handle" name="Handle" maxlength="30" required>
            </div>

            <div class="form-group">
                <label for="Description">Description</label>
                <input type="text" id="Description" name="Description" maxlength="50">
            </div>

            <div class="form-group">
                <label for="PrizePool">Prize Pool</label>
                <small>Free-form text. No HTML tags.</small>
                <textarea id="PrizePool" name="PrizePool" rows="10" cols="50"></textarea>
            </div>

            <div class="form-group">
                <label for="StructureID">Structure</label>
                <select id="StructureID" name="StructureID" required>
                    {{ range .Structures }}
                    <option value="{{ .ID }}">{{ .Name }}</option>
                    {{ end }}
                </select>
            </div>

            <div class="form-group">
                <label for="FooterPlugsID">Footer Plugs</label>
                <select id="FooterPlugsID" name="FooterPlugsID" required>
                    {{ range .FooterSets }}
                    <option value="{{ .FooterPlugsID }}">{{ .Name }}</option>
                    {{ end }}
                </select>
            </div>

            <div class="actions">
                <button type="submit">Create Tournament</button>
                <button type="reset">Reset</button>
            </div>
        </form>
        {{ else }}
        {{ with .Tournament }}
        <form method="POST">
            <input type="hidden" name="Version" value="{{ .Version }}">

            <div class="form-group">
                <label for="EventName">Event Name</label>
                <input type="text" id="EventName" name="EventName" maxlength="30" value="{{ .EventName }}">
            </div>

            <div class="form-group">
                <label for="Handle">Handle</label>
                <input type="text" id="Handle" name="Handle" maxlength="30" value="{{ .Handle }}">
            </div>

            <div class="form-group">
                <label for="Description">Description</label>
                <input type="text" id="Description" name="Description" maxlength="50" value="{{ .Description }}">
            </div>

            <div class="form-group">
                <label for="ChipsPerBuyIn">Chips Per Buy-In</label>
                <input type="text" id="ChipsPerBuyIn" name="ChipsPerBuyIn" maxlength="30" pattern="[0-9,]+" required value="{{ .Structure.ChipsPerBuyIn }}">
            </div>

            <div class="form-group">
                <label for="ChipsPerAddOn">Chips Per Add-On</label>
                <input type="text" id="ChipsPerAddOn" name="ChipsPerAddOn" maxlength="30" pattern="[0-9,]+" required value="{{ .Structure.ChipsPerAddOn }}">
            </div>

            <div class="form-group">
                <label for="TotalChipsOverride">Total Chips Override</label>
                <input type="text" id="TotalChipsOverride" name="TotalChipsOverride" maxlength="30" pattern="[0-9,]+" placeholder="0 to auto-compute" value="{{ .State.TotalChipsOverride }}">
            </div>

            <div class="form-group">
                <label for="PrizePool">Prize Pool</label>
                <small>Free-form text. No HTML tags.</small>
                <textarea id="PrizePool" name="PrizePool" rows="10" cols="50">{{ .State.PrizePool }}</textarea>
            </div>

            <div class="form-group">
                <label for="TotalPlayers">Current Players</label>
                <input type="text" id="CurrentPlayers" name="CurrentPlayers" maxlength="6" pattern="[0-9,]+" value="{{ .State.CurrentPlayers }}">
            </div>

            <div class="form-group">
                <label for="BuyIns">Buy-Ins</label>
                <input type="text" id="BuyIns" name="BuyIns" maxlength="6" pattern="[0-9,]+" value="{{ .State.BuyIns }}">
            </div>

            <div class="form-group">
                <label for="AddOns">Add-Ons</label>
                <input type="text" id="AddOns" name="AddOns" maxlength="6" pattern="[0-9,]+" value="{{ .State.AddOns }}">
            </div>
            
            <div class="actions">
                {{ if $.IsAdmin }}
                <button type="submit">Save Changes</button>
                <button type="reset">Reset to Saved Values</button>
                {{ else }}
                <p>You can look but you can't touch</p>
                {{ end }}
            </div>
           
        </form>
        {{ end }}
        {{ end }}

        {{ if .Flash }}<div class="flash">{{ .Flash }}</div>{{ end }}
    </div>
</body>
</html>
